var uglymart={};
uglymart.name="醜商店"
uglymart.time="2024/6/9"
// 首頁推薦商品資料-----------------
uglymart.homeproducts=[
  {name:"BT Blender Bottle 訂製款",price: 1080, url1:"https://shoplineimg.com/6129efefcb5f400016514425/651fe20613ccbd001dba7705/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/651fe206c5d3e0000e25a71d/375x.webp?source_format=jpg",num:0},
  {name:"KINGJUN BT/蠢兔 金光雙層手機殼",price: 880,url1:"https://shoplineimg.com/6129efefcb5f400016514425/65276ecc4eefee000e7af98e/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/652e53bb94ad83001d880072/800x.webp?source_format=jpg",num:0},
  {name:"KINGJUN大象 金屬鑰匙圈",price: 250,url1:"https://shoplineimg.com/6129efefcb5f400016514425/65af8f99b62b91001137e418/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/65af8f9970181900203137e6/800x.webp?source_format=jpg",num:0},
  {name:"雙層真空不鏽鋼杯 BT/蠢兔",price: 680,url1:"https://shoplineimg.com/6129efefcb5f400016514425/65277aa3d37b08001a2c26c7/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/65277aa4b41f1a001404ea28/800x.webp?source_format=jpg",num:0},
  {name:"KINGJUN滴膠壓克力氣囊支架 (4款)",price: 250,url1:"https://shoplineimg.com/6129efefcb5f400016514425/647c062075a2b0002024da65/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/647c068a91595000145dabe5/800x.webp?source_format=jpg",num:0},
  {name:"KINGJUN 刺繡厚磅Ｔ 大象/BT款",price: 1180,url1:"https://shoplineimg.com/6129efefcb5f400016514425/651ffe0db56a3c00204be160/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/651ffe0ef05e540023177171/800x.webp?source_format=jpg",num:0},
  {name:"KINGJUN Socks 經典Logo刺繡襪",price: 250,url1:"https://shoplineimg.com/6129efefcb5f400016514425/647d5bc4eac84f56b2454110/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/647d69daf661cd00118b716d/800x.webp?source_format=jpg",num:0},
];
// CLOTHE商品資料-----------------
uglymart.clothe=[
  {name:"KINGJUN 刺繡厚磅Ｔ 大象/BT款",price: 1180,url1:"https://shoplineimg.com/6129efefcb5f400016514425/651ffe0db56a3c00204be160/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/651ffe0ef05e540023177171/800x.webp?source_format=jpg",num:0},
  {name:"KINGJUN 展覽限定 花花短Tee",price: 1080,url1:"https://shoplineimg.com/6129efefcb5f400016514425/647abaf8331dc1002353a410/800x.webp?source_format=png",url2:"https://shoplineimg.com/6129efefcb5f400016514425/647abb0a5e073f0014c6e2d7/800x.webp?source_format=png",num:0},
  {name:"KINGJUN Socks 經典Logo刺繡襪",price: 250,url1:"https://shoplineimg.com/6129efefcb5f400016514425/647d5bc4eac84f56b2454110/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/647d69daf661cd00118b716d/800x.webp?source_format=jpg",num:0},
];

// BAG商品資料-----------------
uglymart.bag=[
  {name:"KINGJUN 大象 隨身厚磅提袋 灰/粉",price: 850,url1:"https://shoplineimg.com/6129efefcb5f400016514425/652516bd0327e763937df9df/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/652516bc5ba551001a83d43d/800x.webp?source_format=jpg",num:0},
  {name:"KINGJUN 跑車提袋",price: 980,url1:"https://shoplineimg.com/6129efefcb5f400016514425/647acc52642ce3001a420895/800x.webp?source_format=png",url2:"https://shoplineimg.com/6129efefcb5f400016514425/647ac412e0575d001a127d0c/800x.webp?source_format=png",num:0},
  {name:"KINGJUN 病毒刺繡斜掛包 灰/紫",price: 850,url1:"https://shoplineimg.com/6129efefcb5f400016514425/652527c4d3f69100231bd5c2/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/652527c40563ef001d333adf/800x.webp?source_format=jpg",num:0},
];

// ACC商品資料-----------------
uglymart.acc=[
  {name:"心情符號 KINGMOJI眼罩",price: 280,url1:"https://shoplineimg.com/6129efefcb5f400016514425/65290b50e05cb70020515bc5/800x.webp?source_format=jpeg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/65290b502328c3000e1ecb5d/800x.webp?source_format=jpeg",num:0},
  {name:"Kingmoji 心情符號 Airpods 雙開耳機殼",price: 450,url1:"https://shoplineimg.com/6129efefcb5f400016514425/647f6014f9c6c80017fb57d2/800x.webp?source_format=png",url2:"https://shoplineimg.com/6129efefcb5f400016514425/647f6014c056c000207feb10/800x.webp?source_format=png",num:0},
  {name:"KINGJUN 跑車法蘭絨毛毯",price: 850,url1:"https://shoplineimg.com/6129efefcb5f400016514425/647dba0ce50f3c000eb5ee26/800x.webp?source_format=jpg",url2:"https://shoplineimg.com/6129efefcb5f400016514425/647db9c5a1ff3e0020fd1ec9/800x.webp?source_format=jpg",num:0},
];

// html模板----------
var product_home_html_tem="<div class='box'><img class='down' src='{{url1}}' width='200px'/><img class='up' src='{{url2}}' width='200px'/><div class='name'>{{name}}</div><div class='price'>{{price}}</div><div class='addbtn' id='{{homeadd}}' data_home='{{datahome}}'>加入購物車</div></div>"

var product_clothe_html_tem="<div class='box'><img src='{{url1}}' width='200px'/><img class='up' src='{{url2}}' width='200px'/><div class='name'>{{name}}</div><div class='price'>{{price}}</div><div class='addbtn' id='{{clotheadd}}'data_clothe='{{dataclothe}}'>加入購物車</div></div>"

var product_bag_html_tem="<div class='box'><img src='{{url1}}' width='200px'/><img class='up' src='{{url2}}' width='200px'/><div class='name'>{{name}}</div><div class='price'>{{price}}</div><div class='addbtn' id='{{bagadd}}' data_bag='{{databag}}'>加入購物車</div></div>"

var product_acc_html_tem="<div class='box'><img src='{{url1}}' width='200px'/><img class='up' src='{{url2}}' width='200px'/><div class='name'>{{name}}</div><div class='price'>{{price}}</div><div class='addbtn' id='{{accadd}}' data_acc='{{dataacc}}'>加入購物車</div></div>"

var selectlist_tem="<div class='wrap'><div class='name'>{{name}}</div><div class='minus' id='{{minusid}}' data_minus='{{dataminus}}'>-</div><div class='num'>{{num}}</div><div class='plus' id='{{plusid}}' data_plus='{{dataplus}}'>+</div><div class='price'>{{price}}</div><div class='delbtn2' id='{{delid}}' data_del='{{datadel}}'>✘</div></div>"

var total_tem="<div id='total'><div class='tname'>Total：</div><div class='tprice'>{{price}}</div></div>"


// 顯示HOME首頁商品----------
function showHome(){
  $("#itemlist").html("");
  for(var i=0;i<uglymart.homeproducts.length;i++){
  var product_home_current_html=
      product_home_html_tem.replace("{{name}}",uglymart.homeproducts[i].name)
                           .replace("{{price}}",uglymart.homeproducts[i].price)
                           .replace("{{url1}}",uglymart.homeproducts[i].url1)
                           .replace("{{url2}}",uglymart.homeproducts[i].url2)
                           .replace("{{homeadd}}","homeadd"+i)
                           .replace("{{datahome}}",i)
    $("#itemlist").append(product_home_current_html);
    $("#homeadd"+i).click(
      function(){
        addhome($(this).attr("data_home"));
        select_list();
        total_list();
        $(".reddot").css("display","block");
        $(this).text("已加入購物車！")
      }
    );
  }
}
// 顯示CLOTHE頁面商品----------
function showClothe(){
  $("#itemlist").html("");
  for(var i=0;i<uglymart.clothe.length;i++){
    var product_clothe_current_html=
        product_clothe_html_tem.replace("{{name}}",uglymart.clothe[i].name)
                               .replace("{{price}}",uglymart.clothe[i].price)
                               .replace("{{url1}}",uglymart.clothe[i].url1)
                               .replace("{{url2}}",uglymart.clothe[i].url2)
                               .replace("{{clotheadd}}","clotheadd"+i)
                               .replace("{{dataclothe}}",i);
    $("#itemlist").append(product_clothe_current_html);
    $("#clotheadd"+i).click(
      function(){
        addclothe($(this).attr("data_clothe"));
        select_list();
        total_list();
        $(".reddot").css("display","block");
        $(this).text("已加入購物車！")
      }
    );
  }
}
// 顯示BAG頁面商品----------
function showBag(){
  $("#itemlist").html("");
  for(var i=0;i<uglymart.bag.length;i++){
    var product_bag_current_html=
        product_bag_html_tem.replace("{{name}}",uglymart.bag[i].name)
                            .replace("{{price}}",uglymart.bag[i].price)
                            .replace("{{url1}}",uglymart.bag[i].url1)
                            .replace("{{url2}}",uglymart.bag[i].url2)
                            .replace("{{bagadd}}","bagadd"+i)
                            .replace("{{databag}}",i);
    $("#itemlist").append(product_bag_current_html);
    $("#bagadd"+i).click(
      function(){
        addbag($(this).attr("data_bag"));
        select_list();
        total_list();
        $(".reddot").css("display","block");
        $(this).text("已加入購物車！")
      }
    );
  }
};

// 顯示ACC頁面商品----------
function showAcc(){
  $("#itemlist").html("");
  for(var i=0;i<uglymart.acc.length;i++){
    var product_acc_current_html=
        product_acc_html_tem.replace("{{name}}",uglymart.acc[i].name)
                            .replace("{{price}}",uglymart.acc[i].price)
                            .replace("{{url1}}",uglymart.acc[i].url1)
                            .replace("{{url2}}",uglymart.acc[i].url2)
                            .replace("{{accadd}}","accadd"+i)
                            .replace("{{dataacc}}",i);
    
    $("#itemlist").append(product_acc_current_html);
    $("#accadd"+i).click(
      function(){
        addacc($(this).attr("data_acc"));
        select_list();
        total_list();
        $(".reddot").css("display","block");
        $(this).text("已加入購物車！")
      }
    );
  }
}

selectlist={};
selectlist.list=[];
  
// add加入鍵(HOME頁面)------------------------
function addhome(id){
  var homeName= uglymart.homeproducts[id].name;
  var CheckAllName= selectlist.list.find(item=>item.name===homeName);
  // 如果品名相同，就在數量直接加1
  if(CheckAllName){
    CheckAllName.num+=1;
  } else {selectlist.list.push({name: uglymart.homeproducts[id].name,
                                price: uglymart.homeproducts[id].price,
                                num: uglymart.homeproducts[id].num+1});
  }
}

// add加入鍵(clothe頁面)------------------------
function addclothe(id){
  var clotheName= uglymart.clothe[id].name;
  var CheckclotheName= selectlist.list.find(item=>item.name===clotheName);
  // 如果品名相同，就在數量直接加1
  if(CheckclotheName){
    CheckclotheName.num+=1;
  } else {selectlist.list.push({name: uglymart.clothe[id].name,
                                price: uglymart.clothe[id].price,
                                num: uglymart.clothe[id].num+1});
  }
}
    
// add加入鍵(bag頁面)------------------------
function addbag(id){
  var bagName= uglymart.bag[id].name;
  var CheckbagName= selectlist.list.find(item=>item.name===bagName);
  // 如果品名相同，就在數量直接加1
  if(CheckbagName){
    CheckbagName.num+=1;
  } else {selectlist.list.push({name: uglymart.bag[id].name,
                                price: uglymart.bag[id].price,
                                num: uglymart.bag[id].num+1});
  }
}

// add加入鍵(acc頁面)------------------------
function addacc(id){
  var accName= uglymart.acc[id].name;
  var CheckaccName= selectlist.list.find(item=>item.name===accName);
  // 如果品名相同，就在數量直接加1
  if(CheckaccName){
    CheckaccName.num+=1;
  } else {selectlist.list.push({name: uglymart.acc[id].name,
                                price: uglymart.acc[id].price,
                                num: uglymart.acc[id].num+1});
  }
}

// Ｘ刪除購物車品項---------------------
function remove_item(id){
  selectlist.list.splice(id,1);
  select_list();
  total_list();
}

// 檢查當購物車內品項數量少於0時，即刪除該品項---
function check(id){
  if(selectlist.list[id].num==0){
    selectlist.list.splice(id,1)
    $("#selectlist").addClass("emptycart");
  }
}

// 預設設定購物車清單shoplist---------
// 購物車清單-----------
var selectlist={};
selectlist.list=[];
function select_list(){
  $("#selectlist").html("");
  if(selectlist.list.length==0){
    $("#selectlist").addClass("emptycart");
    $("#total").css("display","none");
  }else{ for(var i=0;i<selectlist.list.length;i++){
          var current_select_list=
          selectlist_tem.replace("{{name}}",selectlist.list[i].name)
                        .replace("{{num}}",selectlist.list[i].num)
                        .replace("{{price}}",selectlist.list[i].price)
                        .replace("{{minusid}}","minusid"+i)
                        .replace("{{dataminus}}",i)
                        .replace("{{plusid}}","plusid"+i)
                        .replace("{{dataplus}}",i)
                        .replace("{{delid}}","delid"+i)
                        .replace("{{datadel}}",i);
      $("#selectlist").append(current_select_list);
      $("#selectlist").removeClass("emptycart");
      $("#total").css("display","block");
    
      // 刪除購物車品項
      $("#delid"+i).click(
        function(){
          remove_item($(this).attr("data_del"));
        }
      );
    
      // 購物車品項數量增加
      $("#plusid"+i).click(
        function(){
          var index=$(".plus").index(this);
          selectlist.list[index].num+=1;
          index = 0;
          select_list();
          total_list();
        }
      );
    
      // 購物車品項數量減少
      $("#minusid"+i).click(
        function(){
          var index=$(".minus").index(this);
          selectlist.list[index].num-=1;
          index = 0;
          check($(this).attr("data_minus"));
          select_list();
          total_list();
        }
      );
    
    }
  }
}

// 購物車品項金額加總---------
function total_list(){
  $("#total").html("");
  // const是比較好的宣告語法
  // 物件陣列加總reduce()語法
  const sum=selectlist.list.reduce(
    (sum,b)=>{return sum+b.price*b.num},0)
  console.log(sum)
  // for(var i=0;i<selectlist.list.length;i++){
  //   var total_price=0;
  //   total_price+=parseInt(selectlist.list[i].price)*parseInt(selectlist.list[i].num)
  //   console.log(total_price);
  //   $("#total").html("");
    var current_total_html=
        total_tem.replace("{{price}}",sum);
    $("#total").append(current_total_html);
  }
// }
// 載入畫面顯示HOME首頁商品----------
showHome();
$(".ugly").click(
  function(){
    $(".clothe").removeClass("bottom_line")
    $(".bag").removeClass("bottom_line")
    $(".acc").removeClass("bottom_line")
    showHome();
  }
);

// NAV導覽列選單設定----------
$(".home").click(
  function(){
    $(this).addClass("bottom_line")
    $(".clothe").removeClass("bottom_line")
    $(".bag").removeClass("bottom_line")
    $(".acc").removeClass("bottom_line")
    showHome();
  }
);

$(".clothe").click(
  function(){
    $(this).addClass("bottom_line")
    showClothe();
    $(".home").removeClass("bottom_line")
    $(".bag").removeClass("bottom_line")
    $(".acc").removeClass("bottom_line")
  }
);

$(".bag").click(
  function(){
    showBag();
    $(this).addClass("bottom_line")
    $(".clothe").removeClass("bottom_line")
    $(".home").removeClass("bottom_line")
    $(".acc").removeClass("bottom_line")
  }
);

$(".acc").click(
  function(){
    showAcc();
    $(this).addClass("bottom_line")
    $(".clothe").removeClass("bottom_line")
    $(".home").removeClass("bottom_line")
    $(".bag").removeClass("bottom_line")
  }
);

// 點擊購物車，顯示購物車畫面--------
$(".cartimg").click(
  function(){
    $(".cartnote").css("display","block");
    $(".greyscreen").css("display","block");
    $(".reddot").css("display","none");
  }
);

// 為甚麼display none失效了? 層級關係
$(".delbtn").click(
  function(){
    $(".greyscreen").css("display","none");
    $(".cartnote").css("display","none");
  }
);